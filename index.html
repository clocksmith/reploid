<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes" />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><defs><linearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'><stop offset='0%25' style='stop-color:%230ff;'/><stop offset='100%25' style='stop-color:%23ffd700;'/></linearGradient></defs><text fill='url(%23g)' y='.99em' font-size='90' font-weight='bold'>R</text></svg>" />
    <title>REPLOID - AI Assistant</title>
    <link rel="stylesheet" href="boot/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.5.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/acorn@8.12.1/dist/acorn.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-typescript.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-json.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-css.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-markup.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-markdown.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-python.min.js"></script>
    <script src="https://esm.run/@mlc-ai/web-llm"></script>

    <!-- Firebase Analytics -->
    <script type="module">
      import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
      import { getAnalytics } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js';

      const firebaseConfig = {
        apiKey: "AIzaSyBNjEuGLafsUde3ws_9_Zi-PUlKkWt-CWM",
        authDomain: "reploid.firebaseapp.com",
        projectId: "reploid",
        storageBucket: "reploid.firebasestorage.app",
        messagingSenderId: "506730551098",
        appId: "1:506730551098:web:1b9639865cb8501b7c2203",
        measurementId: "G-RL299QYBNB"
      };

      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
    </script>
</head>
<body>
    <div id="boot-container">
        <div class="boot-header">
            <h1>REPLOID</h1>
            <p class="subtitle">
                <a href="about.html" target="_blank" class="subtitle-link">[Experimental] Recursive Self-Improvement Ecosystem</a>
            </p>
        </div>

        <!-- Status and Config at Top -->
        <div class="status-bar">
            <div class="status-item">
                <span class="status-label">Server Status:</span>
                <span id="api-status" class="status-value">⚙️ Checking...</span>
            </div>
            <div class="status-item">
                <span class="status-label">AI Provider:</span>
                <span id="provider-status" class="status-value">-</span>
            </div>
            <button id="config-btn" class="btn-config" title="Configure API Keys">⛭</button>
        </div>

        <div id="api-error-message" class="error-message hidden">
            <strong>⚠️ Server Offline</strong>
            <p>The REPLOID server at <code>localhost:8000</code> is not responding.</p>
            <p><strong>To fix this:</strong></p>
            <ol>
                <li>Make sure the server is running: <code>npm start</code></li>
                <li>Check your API key is in <code>.env</code> file</li>
                <li>Or click the ⛭ button above to paste your API key directly</li>
            </ol>
        </div>

        <!-- API Key Configuration Modal -->
        <div id="config-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>API Configuration</h3>
                    <button id="close-modal" class="close-btn">×</button>
                </div>
                <div class="modal-body">
                    <p>Configure your AI provider API keys. These will be stored locally in your browser.</p>

                    <div class="api-key-input">
                        <label for="gemini-key">Google Gemini API Key</label>
                        <input type="password" id="gemini-key" placeholder="AIza..." />
                        <small>Get your key from <a href="https://aistudio.google.com/app/apikey" target="_blank">Google AI Studio</a></small>
                    </div>

                    <div class="api-key-input">
                        <label for="openai-key">OpenAI API Key (Optional)</label>
                        <input type="password" id="openai-key" placeholder="sk-..." />
                        <small>Get your key from <a href="https://platform.openai.com/api-keys" target="_blank">OpenAI Platform</a></small>
                    </div>

                    <div class="api-key-input">
                        <label for="anthropic-key">Anthropic API Key (Optional)</label>
                        <input type="password" id="anthropic-key" placeholder="sk-ant-..." />
                        <small>Get your key from <a href="https://console.anthropic.com/" target="_blank">Anthropic Console</a></small>
                    </div>

                    <button id="save-keys-btn" class="btn primary">Save Keys</button>
                </div>
            </div>
        </div>

        <!-- Goal Input at Top -->
        <div class="goal-container-top">
            <div class="goal-input-group">
                <input type="text" id="goal-input" placeholder="What is your goal? (e.g., Create a landing page, Refactor my code, Write an RFC...)" maxlength="500" />
                <button id="awaken-btn" class="btn primary">Launch Agent</button>
            </div>
        </div>

        <!-- Configuration Tabs -->
        <div class="config-section">
            <div class="config-tabs">
                <button class="config-tab active" data-tab="templates">
                    <span class="tab-text">Pre-Built Templates</span>
                </button>
                <button class="config-tab" data-tab="hunter">
                    <span class="tab-text">Hunter Protocol Mode</span>
                </button>
            </div>

            <div class="tab-description">
                <p id="tab-description-text">Choose from pre-configured module sets optimized for specific tasks</p>
            </div>

            <!-- Templates Tab Content -->
            <div class="tab-content active" id="templates-tab">
                <div id="persona-selection-container">
                    <!-- Persona cards will be dynamically inserted here -->
                </div>
            </div>

            <!-- Hunter Protocol Tab Content -->
            <div class="tab-content" id="hunter-tab">
                <div id="advanced-options">
                    <!-- Advanced selection UI will be rendered here -->
                </div>
            </div>
        </div>
    </div>
    <div id="app-root" style="display: none;"></div>

            <script src="https://unpkg.com/@isomorphic-git/lightning-fs"></script>
    <script src="https://unpkg.com/isomorphic-git"></script>
    <script src="https://unpkg.com/isomorphic-git/http/web/index.js"></script>
    <script src="boot.js"></script>
</body>
</html>
