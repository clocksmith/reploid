<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <base id="reploid-base" href="/">
  <script>
    (function () {
      const base = document.getElementById("reploid-base");
      if (!base) return;
      base.href = window.location.pathname.startsWith("/src/") ? "/src/" : "/";
    })();
  </script>
  <title>RD Design System</title>
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <script>
    window.REPLOID_SW_VERSION = "1735500005";
    window.REPLOID_VFS_VERSION = "1735500005";
    (function () {
      const key = "REPLOID_SW_VERSION";
      if (!("serviceWorker" in navigator)) return;
      const expected = window.REPLOID_SW_VERSION;
      if (!expected) return;
      const current = localStorage.getItem(key);
      if (current === expected) return;
      navigator.serviceWorker.getRegistrations().then((regs) => {
        if (!regs.length) {
          localStorage.setItem(key, expected);
          return;
        }
        return Promise.all(regs.map((reg) => reg.unregister())).then(() => {
          localStorage.setItem(key, expected);
          window.location.reload();
        });
      }).catch(() => {});
    })();
  </script>
  <link rel="stylesheet" href="styles/rd.css">
  <style>
    .design-page {
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
    }
    .design-header {
      margin-bottom: 48px;
    }
    .design-header h1 {
      font: 300 2rem/1.2 var(--font-a);
      letter-spacing: 0.2em;
      margin: 0 0 var(--space-sm) 0;
    }
    .design-header p {
      opacity: var(--opacity-muted);
      margin: 0;
    }
    .design-section {
      margin-bottom: 48px;
    }
    .design-section h2 {
      font: 700 11px/1.2 var(--font-a);
      text-transform: uppercase;
      letter-spacing: 2px;
      border-bottom: var(--border-sm) solid var(--fg);
      padding-bottom: var(--space-sm);
      margin-bottom: var(--space-lg);
    }
    .design-row {
      display: flex;
      flex-wrap: wrap;
      gap: var(--space-md);
      margin-bottom: var(--space-md);
      align-items: center;
    }
    .design-label {
      font-size: 11px;
      opacity: var(--opacity-muted);
      margin-bottom: var(--space-sm);
    }
    .design-group {
      margin-bottom: var(--space-lg);
    }
    .token {
      display: inline-flex;
      align-items: center;
      gap: var(--space-sm);
      padding: var(--space-sm) 0;
      font-size: 13px;
    }
    .token-swatch {
      width: 20px;
      height: 20px;
      border: 1px solid var(--fg);
    }
    .token-swatch.fg { background: var(--fg); }
    .token-swatch.bg { background: var(--bg); }
  </style>
</head>
<body>
  <div class="design-page">
    <header class="design-header">
      <h1>RD</h1>
      <p>Black & white, with a sprinkle of prism</p>
    </header>

    <!-- PRIMITIVES -->
    <section class="design-section">
      <h2>Primitives</h2>

      <div class="design-group">
        <div class="design-label">Colors</div>
        <div class="design-row">
          <div class="token"><div class="token-swatch fg"></div> --fg</div>
          <div class="token"><div class="token-swatch bg"></div> --bg</div>
          <div class="token"><div class="token-swatch" style="background: conic-gradient(#ff0000, #ff8000, #ffff00, #00ff00, #00ffff, #0080ff, #8000ff, #ff0080, #ff0000);"></div> --prism</div>
        </div>
      </div>

      <div class="design-group">
        <div class="design-label">Fonts</div>
        <div class="token">--font-a: <span style="font-family: var(--font-a);">SF Mono / Menlo / Consolas / DejaVu Sans Mono</span></div>
        <div class="token">--font-b: <span style="font-family: var(--font-b);">Courier New / Courier / Liberation Mono / Nimbus Mono L</span></div>
      </div>

      <div class="design-group">
        <div class="design-label">Spacing</div>
        <div class="design-row">
          <div class="token">--space-sm: 8px</div>
          <div class="token">--space-md: 16px</div>
          <div class="token">--space-lg: 24px</div>
        </div>
      </div>

      <div class="design-group">
        <div class="design-label">Border Widths</div>
        <div class="design-row">
          <div class="token">--border-sm: 1px</div>
          <div class="token">--border-md: 2px</div>
          <div class="token">--border-lg: 3px</div>
        </div>
      </div>

      <div class="design-group">
        <div class="design-label">Opacity</div>
        <div class="design-row">
          <div class="token" style="opacity: var(--opacity-ghost);">--opacity-ghost: 0.7</div>
          <div class="token" style="opacity: var(--opacity-secondary);">--opacity-secondary: 0.6</div>
          <div class="token" style="opacity: var(--opacity-muted);">--opacity-muted: 0.5</div>
          <div class="token" style="opacity: var(--opacity-disabled);">--opacity-disabled: 0.3</div>
        </div>
      </div>

    </section>

    <!-- LINKS -->
    <section class="design-section">
      <h2>Links</h2>
      <div class="design-row">
        <a href="#">Default link</a>
        <a href="#" class="link-secondary">Secondary link</a>
      </div>
    </section>

    <!-- TYPOGRAPHY -->
    <section class="design-section">
      <h2>Typography</h2>
      <div class="design-group">
        <div class="token">.type-display</div>
        <div class="type-display">Welcome to the Future</div>
      </div>
      <div class="design-group">
        <div class="token">.type-h1</div>
        <div class="type-h1">Primary Heading</div>
      </div>
      <div class="design-group">
        <div class="token">.type-h2</div>
        <div class="type-h2">Secondary Heading</div>
      </div>
      <div class="design-group">
        <div class="token">.type-body</div>
        <div class="type-body">The quick brown fox jumps over the lazy dog. This is body text used for paragraphs and readable content.</div>
      </div>
      <div class="design-group">
        <div class="token">.type-label</div>
        <div class="type-label">Status</div>
      </div>
      <div class="design-group">
        <div class="token">.type-ui</div>
        <div class="type-ui">Submit Form</div>
      </div>
      <div class="design-group">
        <div class="token">.type-caption</div>
        <div class="type-caption">Last updated 2 hours ago</div>
      </div>
    </section>

    <!-- BORDERS -->
    <section class="design-section">
      <h2>Borders</h2>
      <div class="design-row" style="flex-wrap: wrap;">
        <div class="border-default" style="padding: var(--space-sm) var(--space-md);">.border-default</div>
        <div class="border-subtle" style="padding: var(--space-sm) var(--space-md);">.border-subtle</div>
        <div class="border-elevated" style="padding: var(--space-sm) var(--space-md);">.border-elevated</div>
        <div class="border-ghost" style="padding: var(--space-sm) var(--space-md);">.border-ghost</div>
        <div class="border-info" style="padding: var(--space-sm) var(--space-md);">.border-info</div>
        <div class="border-warning" style="padding: var(--space-sm) var(--space-md);">.border-warning</div>
        <div class="border-error" style="padding: var(--space-sm) var(--space-md);">.border-error</div>
        <div class="border-disabled" style="padding: var(--space-sm) var(--space-md);">.border-disabled</div>
        <div class="border-prism" style="padding: var(--space-sm) var(--space-md);">.border-prism</div>
      </div>
    </section>

    <!-- BUTTONS -->
    <section class="design-section">
      <h2>Button</h2>
      <p class="design-label">Variants: secondary (default), primary, ghost, prism | States: hover, active, disabled</p>

      <div class="design-row">
        <button class="btn btn-primary">Primary</button>
        <button class="btn">Secondary</button>
        <button class="btn btn-ghost">Ghost</button>
        <button class="btn btn-prism">Prism</button>
      </div>
      <div class="design-row">
        <button class="btn" disabled>Disabled</button>
      </div>
    </section>

    <!-- INPUTS -->
    <section class="design-section">
      <h2>Input</h2>
      <p class="design-label">States: empty (dotted), filled (solid), focus, disabled, error</p>

      <div class="design-group">
        <input type="text" placeholder="Empty (dotted border)" style="max-width: 300px;">
      </div>
      <div class="design-group">
        <div class="input-error" style="max-width: 300px;">
          <input type="text" class="error" value="Error state">
        </div>
      </div>
      <div class="design-group">
        <input type="text" value="Disabled" disabled style="max-width: 300px;">
      </div>
    </section>

    <!-- SELECT -->
    <section class="design-section">
      <h2>Select (custom)</h2>
      <p class="design-label">States: closed, .open, .selected | Click to toggle</p>

      <div class="design-row" style="align-items: flex-start;">
        <div class="design-group">
          <div class="design-label">Closed</div>
          <div class="select-custom" style="width: 150px;">
            <div class="select-trigger">Choose option</div>
            <div class="select-options">
              <div class="select-option">Option 1</div>
              <div class="select-option selected">Option 2</div>
              <div class="select-option">Option 3</div>
            </div>
          </div>
        </div>
        <div class="design-group">
          <div class="design-label">Open (.open)</div>
          <div class="select-custom open" style="width: 150px;">
            <div class="select-trigger">Option 2</div>
            <div class="select-options">
              <div class="select-option">Option 1</div>
              <div class="select-option selected">Option 2</div>
              <div class="select-option">Option 3</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- TEXTAREA -->
    <section class="design-section">
      <h2>Textarea</h2>
      <div class="design-group">
        <textarea placeholder="Enter text..." style="max-width: 300px; height: 80px;"></textarea>
      </div>
    </section>

    <!-- PANEL -->
    <section class="design-section">
      <h2>Panel</h2>
      <p class="design-label">Variants: default, muted | Border weight = elevation</p>

      <div class="design-row" style="align-items: stretch;">
        <div class="panel" style="flex: 1;">
          <div class="panel-body">Default panel</div>
        </div>
        <div class="panel panel-muted" style="flex: 1;">
          <div class="panel-body">Muted panel</div>
        </div>
      </div>
    </section>

    <!-- PROGRESS -->
    <section class="design-section">
      <h2>Progress</h2>
      <div class="design-group">
        <div class="progress" style="max-width: 300px;">
          <div class="progress-fill" style="width: 60%;"></div>
        </div>
      </div>
    </section>

    <!-- BADGES -->
    <section class="design-section">
      <h2>Badge</h2>
      <div class="design-row">
        <span class="badge">★ Success</span>
        <span class="badge">☛ Info</span>
        <span class="badge">△ Warning</span>
        <span class="badge">☒ Error</span>
      </div>
    </section>

    <!-- TOAST -->
    <section class="design-section">
      <h2>Toast</h2>
      <p class="design-label">Variants: default, success, info, warning, error | Inner: .toast-icon, .toast-message, .toast-close</p>
      <div class="design-group toast-container" style="position: relative; top: 0; right: 0; max-width: 400px;">
        <div class="toast visible" style="opacity: 1; transform: none;">
          <span class="toast-icon">☛</span>
          <span class="toast-message">Default toast message</span>
          <span class="toast-close">⨯</span>
        </div>
        <div class="toast toast-success visible" style="opacity: 1; transform: none;">
          <span class="toast-icon">★</span>
          <span class="toast-message">Success toast (solid left border)</span>
          <span class="toast-close">⨯</span>
        </div>
        <div class="toast toast-info visible" style="opacity: 1; transform: none;">
          <span class="toast-icon">☛</span>
          <span class="toast-message">Info toast (dotted)</span>
          <span class="toast-close">⨯</span>
        </div>
        <div class="toast toast-warning visible" style="opacity: 1; transform: none;">
          <span class="toast-icon">△</span>
          <span class="toast-message">Warning toast (dashed)</span>
          <span class="toast-close">⨯</span>
        </div>
        <div class="toast toast-error visible" style="opacity: 1; transform: none;">
          <span class="toast-icon">☒</span>
          <span class="toast-message">Error toast (double)</span>
          <span class="toast-close">⨯</span>
        </div>
      </div>
    </section>

    <!-- CARD -->
    <section class="design-section">
      <h2>Card</h2>
      <div class="design-group">
        <div class="card" style="max-width: 300px;">
          <div class="card-header">Card Header</div>
          <div class="card-body">Card body content goes here.</div>
          <div class="card-footer">Card footer</div>
        </div>
      </div>
    </section>

    <!-- LIST -->
    <section class="design-section">
      <h2>List</h2>
      <div class="design-group">
        <ul class="list" style="max-width: 300px; border: var(--border-sm) solid var(--fg);">
          <li class="list-item">List item one</li>
          <li class="list-item">List item two (hover me)</li>
          <li class="list-item">List item three</li>
        </ul>
      </div>
    </section>

    <!-- TAG -->
    <section class="design-section">
      <h2>Tag</h2>
      <div class="design-row">
        <span class="tag">tag-one</span>
        <span class="tag">tag-two</span>
        <span class="tag">tag-three</span>
      </div>
    </section>

    <!-- BADGE VARIANTS -->
    <section class="design-section">
      <h2>Badge Variants</h2>
      <div class="design-row">
        <span class="badge">Outline</span>
        <span class="badge badge-filled">Filled</span>
      </div>
    </section>

    <!-- DIVIDER -->
    <section class="design-section">
      <h2>Divider</h2>
      <div class="design-group" style="max-width: 300px;">
        <p class="design-label">.divider (solid)</p>
        <hr class="divider">
        <p class="design-label">.divider-dashed</p>
        <hr class="divider divider-dashed">
        <p class="design-label">.divider-dotted</p>
        <hr class="divider divider-dotted">
      </div>
    </section>

    <!-- CHECKBOX & RADIO -->
    <section class="design-section">
      <h2>Checkbox & Radio</h2>
      <div class="design-group">
        <label class="checkbox-label">
          <input type="checkbox" checked>
          <span>Checkbox label</span>
        </label>
      </div>
      <div class="design-group">
        <label class="radio-label">
          <input type="radio" name="demo" checked>
          <span>Radio option A</span>
        </label>
        <label class="radio-label">
          <input type="radio" name="demo">
          <span>Radio option B</span>
        </label>
      </div>
    </section>

    <!-- PROGRESS INDETERMINATE -->
    <section class="design-section">
      <h2>Progress Indeterminate</h2>
      <div class="design-group">
        <div class="progress progress-indeterminate" style="max-width: 300px;">
          <div class="progress-fill"></div>
        </div>
      </div>
    </section>

    <!-- PROGRESS PHASES -->
    <section class="design-section">
      <h2>Progress Phases</h2>
      <p class="design-label">Row variants for source type differentiation: network (dotted), disk (dashed), cache (solid)</p>
      <div class="design-group" style="max-width: 400px;">
        <div class="progress-phase-row progress-phase-network" style="display: grid; grid-template-columns: 70px 1fr 80px; gap: var(--space-sm); align-items: center; padding: var(--space-sm);">
          <span class="type-caption">Network</span>
          <div class="progress"><div class="progress-fill" style="width: 45%;"></div></div>
          <span class="type-caption muted">45%</span>
        </div>
        <div class="progress-phase-row progress-phase-disk" style="display: grid; grid-template-columns: 70px 1fr 80px; gap: var(--space-sm); align-items: center; padding: var(--space-sm);">
          <span class="type-caption">Disk</span>
          <div class="progress"><div class="progress-fill" style="width: 72%;"></div></div>
          <span class="type-caption muted">72%</span>
        </div>
        <div class="progress-phase-row progress-phase-cache" style="display: grid; grid-template-columns: 70px 1fr 80px; gap: var(--space-sm); align-items: center; padding: var(--space-sm);">
          <span class="type-caption">Cache</span>
          <div class="progress"><div class="progress-fill" style="width: 100%;"></div></div>
          <span class="type-caption muted">100%</span>
        </div>
      </div>
    </section>

    <!-- ERROR UI -->
    <section class="design-section">
      <h2>Error UI</h2>
      <p class="design-label">Full-page error component for boot failures</p>
      <div class="design-group">
        <div class="error-ui panel border-error" style="max-width: 500px;">
          <h1 class="error-ui-header">Boot Failure</h1>
          <p class="error-ui-description muted">The application failed to start due to an unexpected error.</p>
          <div class="error-ui-message">TypeError: Cannot read property 'init' of undefined</div>
          <details class="error-ui-details">
            <summary>Stack trace</summary>
            <pre class="error-ui-stack">at entry/start-app.js:42:15
at Module.load (loader.js:88:12)
at require (runtime.js:33:8)</pre>
          </details>
          <p class="error-ui-hint muted type-caption">Try reloading the page or clearing browser storage.</p>
          <div class="error-ui-actions">
            <button class="btn">↻ Reload Page</button>
            <button class="btn btn-primary">⌫ Factory Reset</button>
          </div>
        </div>
      </div>
    </section>

    <!-- PANEL WITH HEADER -->
    <section class="design-section">
      <h2>Panel with Header</h2>
      <div class="design-group">
        <div class="panel" style="max-width: 300px; padding: 0;">
          <div class="panel-header">Panel Title</div>
          <div class="panel-body">Panel body content.</div>
        </div>
      </div>
    </section>

    <!-- MODAL -->
    <section class="design-section">
      <h2>Modal</h2>
      <p class="design-label">Container: .modal-overlay (fixed fullscreen) | Shown inline below</p>
      <div class="design-group modal-overlay" style="position: relative; inset: auto; height: auto; background: #f5f5f5; padding: 20px;">
        <div class="modal" style="max-width: 300px; position: relative;">
          <div class="modal-header">
            <span class="type-h2">Modal Title</span>
            <button class="btn btn-ghost" style="padding: 4px 8px;">×</button>
          </div>
          <div class="modal-body">Modal content goes here.</div>
          <div class="modal-footer">
            <button class="btn btn-ghost">Cancel</button>
            <button class="btn btn-primary">Confirm</button>
          </div>
        </div>
      </div>
    </section>

    <!-- UTILITIES -->
    <section class="design-section">
      <h2>Utilities</h2>

      <div class="design-group">
        <div class="design-label">Opacity / Inverted</div>
        <div class="design-row">
          <span class="muted">.muted (0.5)</span>
          <span class="inverted" style="padding: 4px 8px;">.inverted</span>
        </div>
      </div>

      <div class="design-group">
        <div class="design-label">Sizing</div>
        <div class="design-row">
          <div class="w-full" style="border: 1px solid var(--fg); padding: 4px;">.w-full</div>
        </div>
        <div class="design-row" style="margin-top: 8px;">
          <div style="height: 40px; width: 100px; border: 1px dashed var(--fg);"><div class="h-full" style="background: #eee;">.h-full</div></div>
          <div class="overflow-auto" style="border: 1px solid var(--fg); height: 40px; width: 100px; padding: 4px;">overflow-auto with scrollable content here...</div>
          <div class="overflow-hidden" style="border: 1px solid var(--fg); height: 40px; width: 100px; padding: 4px;">overflow-hidden clips this long content</div>
        </div>
      </div>

      <div class="design-group">
        <div class="design-label">Interaction states</div>
        <div class="design-row">
          <span class="cursor-pointer" style="border: 1px solid var(--fg); padding: 4px 8px;">.cursor-pointer</span>
          <span class="cursor-not-allowed" style="border: 1px solid var(--fg); padding: 4px 8px;">.cursor-not-allowed</span>
          <span class="select-none" style="border: 1px solid var(--fg); padding: 4px 8px;">.select-none</span>
          <span class="pointer-events-none" style="border: 1px solid var(--fg); padding: 4px 8px; opacity: 0.5;">.pointer-events-none</span>
        </div>
      </div>

      <div class="design-group">
        <div class="design-label">Visibility</div>
        <div class="design-row">
          <span style="border: 1px solid var(--fg); padding: 4px 8px;">visible</span>
          <span class="hidden">.hidden (not visible)</span>
          <span style="border: 1px dashed var(--fg); padding: 4px 8px; opacity: 0.5;">(hidden element here)</span>
        </div>
      </div>
    </section>

    <footer style="margin-top: 48px; padding-top: 16px; border-top: 1px solid var(--fg); opacity: 0.5; font-size: 11px;">
      RD Design System for REPLOID / DOPPLER
    </footer>
  </div>

  <script>
    // Custom select interaction
    document.querySelectorAll('.select-custom').forEach(select => {
      const trigger = select.querySelector('.select-trigger');
      const options = select.querySelectorAll('.select-option');

      trigger.addEventListener('click', () => {
        select.classList.toggle('open');
      });

      options.forEach(option => {
        option.addEventListener('click', () => {
          options.forEach(o => o.classList.remove('selected'));
          option.classList.add('selected');
          trigger.textContent = option.textContent;
          select.classList.remove('open');
        });
      });
    });

    document.addEventListener('click', (e) => {
      if (!e.target.closest('.select-custom')) {
        document.querySelectorAll('.select-custom.open').forEach(s => s.classList.remove('open'));
      }
    });
  </script>
</body>
</html>
